!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("client-analytics-frontend",[],t):"object"==typeof exports?exports["client-analytics-frontend"]=t():e["client-analytics-frontend"]=t()}("undefined"==typeof self?this:self,(function(){return(e={820:function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=a(r(43)),c=r(487),f=r(904),p=function(){var e,t=c.rootReducer(),r=function(e){var r,n,o,i;t.location!==(null===(r=window)||void 0===r||null===(n=r.location)||void 0===n?void 0:n.href)&&(t=c.rootReducer(t,c.resetRenderStateA()),t=c.rootReducer(t,c.setLocationA(null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.href))),t=c.rootReducer(t,e)},o=null!==(e=sessionStorage.getItem("clientAnalyticsFrontend_sessionID"))&&void 0!==e?e:l.default();sessionStorage.setItem("clientAnalyticsFrontend_sessionID",o);var i=f.debounce((function(e){return e()})),u=f.debounce((function(){!t.profile.items&&t.profile.name&&r(c.endEmptyProfileA());var e=t.profile.items,u={};e&&Object.keys(e).forEach((function(t){var r;u[t]=e[t].endRender?(null!==(r=e[t].endRender)&&void 0!==r?r:0)-e[t].startRender:null}));var a={location:t.location,user:s(s({},t.user),{},{sessionId:o}),addFields:s(s({},t.addFields),u),tags:t.tags,name:null,type:null,method:null,requestUri:null,status:null,time:null,requestSize:null,responseSize:null};t.profile.id&&(a.addFields=s(s({},a.addFields),{},{"profile-id":t.profile.id}),a.tags=[].concat(n(a.tags),["profile_id: ".concat(t.profile.id)]));var p=s(s({},a),{},{id:t.profile.id,name:t.profile.name,type:"profile",time:t.profile.endProfile&&t.profile.startProfile?t.profile.endProfile-t.profile.startProfile:null}),d=t.requests.map((function(e){return s(s(s({},a),e),{},{id:l.default()})})),y=localStorage.getItem("clientAnalyticsFrontend"),A=y?[].concat(n(JSON.parse(y)),n(d)):n(d);p.name&&A.push(p);var E=JSON.stringify(A),T=function(){t.push.api?f.fetchData(t.push.api,E):console.log(A),localStorage.removeItem("clientAnalyticsFrontend")};A.length&&A.length>t.push.limitRequests?T():(A.length&&localStorage.setItem("clientAnalyticsFrontend",E),r(c.resetRenderStateA()),i(t.push.pushTimer,T))}));return{get getState(){return t},setUser:function(e){e!==t.user&&r(c.setUserA(e))},setLocation:function(e){e!==t.location&&r(c.setLocationA(e))},setAddFields:function(e){r(c.setAddFieldsA(e))},addTag:function(e){r(c.addTagA(e))},removeTag:function(e){r(c.removeTagA(e))},beginProfile:function(e){t.profile.id&&t.profile.name===e||(u(t.push.pushStoreProfileTimer),r(c.beginProfileA(e)))},beginRender:function(e){t.profile.items&&e in t.profile.items||!t.profile.id||(u(3e4),r(c.beginRenderA(e)))},endRender:function(e){var n=t.profile.items;n&&e in n&&!n[e].endRender&&t.profile.id&&(r(c.endRenderA(e)),(!t.profile.id||t.profile.endProfile&&n)&&u(t.push.pushStoreProfileTimer))},addRequest:function(e,n,o,i){r(c.addRequestA(e,n,o,i)),(!t.profile.id||t.profile.endProfile&&t.profile.items)&&u(t.push.pushStoreRequestTimer)},setPushApi:function(e){r(c.setPushApiA(e))},setPushTimer:function(e){r(c.setPushTimerA(e))},setPushStoreRequestTimer:function(e){r(c.setPushStoreRequestTimerA(e))},setPushStoreProfileTimer:function(e){r(c.setPushStoreProfileTimerA(e))},setLimitRequests:function(e){r(c.setLimitRequestsA(e))}}}();t.default=p},844:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLimitRequestsA=t.setPushStoreProfileTimerA=t.setPushStoreRequestTimerA=t.setPushTimerA=t.setPushApiA=t.addRequestA=t.resetRenderStateA=t.endRenderA=t.beginRenderA=t.endEmptyProfileA=t.beginProfileA=t.removeTagA=t.addTagA=t.setAddFieldsA=t.setLocationA=t.setUserA=void 0;var n=r(834);t.setUserA=function(e){return{type:n.CAFActionTypes.SET_USER,payload:e}},t.setLocationA=function(e){return{type:n.CAFActionTypes.SET_LOCATION,payload:e}},t.setAddFieldsA=function(e){return{type:n.CAFActionTypes.SET_ADD_FIELDS,payload:e}},t.addTagA=function(e){return{type:n.CAFActionTypes.ADD_TAG,payload:e}},t.removeTagA=function(e){return{type:n.CAFActionTypes.REMOVE_TAG,payload:e}},t.beginProfileA=function(e){return{type:n.CAFActionTypes.BEGIN_PROFILE,payload:e}},t.endEmptyProfileA=function(){return{type:n.CAFActionTypes.END_EMPTY_PROFILE}},t.beginRenderA=function(e){return{type:n.CAFActionTypes.BEGIN_RENDER,payload:e}},t.endRenderA=function(e){return{type:n.CAFActionTypes.END_RENDER,payload:e}},t.resetRenderStateA=function(){return{type:n.CAFActionTypes.RESET_RENDER_STATE}},t.addRequestA=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",o=arguments.length>3?arguments[3]:void 0,i={status:e.status,time:t,type:"request"};return e.config&&e.data?(i.method=e.config.method.toUpperCase(),i.requestUri=e.config.url,i.responseSize=JSON.stringify(e.data).length,i.requestSize=e.config.data.length):(i.method=r,i.requestUri=e.url,e.text&&e.text().then((function(e){i.responseSize=e.length})),i.requestSize=null!=o?o:null),{type:n.CAFActionTypes.ADD_REQUEST,payload:i}},t.setPushApiA=function(e){return{type:n.CAFActionTypes.SET_PUSH_API,payload:e}},t.setPushTimerA=function(e){return{type:n.CAFActionTypes.SET_PUSH_TIMER,payload:e}},t.setPushStoreRequestTimerA=function(e){return{type:n.CAFActionTypes.SET_PUSH_STORE_REQUEST_TIMER,payload:e}},t.setPushStoreProfileTimerA=function(e){return{type:n.CAFActionTypes.SET_PUSH_STORE_PROFILE_TIMER,payload:e}},t.setLimitRequestsA=function(e){return{type:n.CAFActionTypes.SET_LIMIT_REQUESTS,payload:e}}},487:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(844),t),o(r(689),t)},689:function(e,t,r){"use strict";var n,o,i;function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.rootReducer=void 0;var p=f(r(43)),d=r(834),y={name:null,id:null,startProfile:null,endProfile:null,items:null},A=[],E={userKeycloakId:null,fullName:null},T={user:E,location:null!==(n=null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.href)&&void 0!==n?n:"",push:{api:null,limitRequests:20,pushTimer:1e4,pushStoreRequestTimer:500,pushStoreProfileTimer:5e3},addFields:{},tags:[],profile:y,requests:A};t.rootReducer=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:d.CAFActionTypes.__INIT__},n=Date.now();switch(null==r?void 0:r.type){case d.CAFActionTypes.SET_USER:return l(l({},t),{},{user:null!==(e=r.payload)&&void 0!==e?e:E});case d.CAFActionTypes.SET_LOCATION:return l(l({},t),{},{location:r.payload});case d.CAFActionTypes.SET_ADD_FIELDS:return l(l({},t),{},{addFields:l(l({},t.addFields),r.payload)});case d.CAFActionTypes.ADD_TAG:return t.tags.includes(r.payload)?t:l(l({},t),{},{tags:[].concat(s(t.tags),[r.payload])});case d.CAFActionTypes.REMOVE_TAG:return l(l({},t),{},{tags:t.tags.filter((function(e){return e!==r.payload}))});case d.CAFActionTypes.BEGIN_PROFILE:return t.profile.name?t:l(l({},t),{},{profile:l(l({},t.profile),{},{name:r.payload,id:p.default(),startProfile:n})});case d.CAFActionTypes.END_EMPTY_PROFILE:return t.profile.name?l(l({},t),{},{profile:l(l({},t.profile),{},{endProfile:t.profile.startProfile})}):t;case d.CAFActionTypes.BEGIN_RENDER:return t.profile.items&&r.payload in t.profile.items?t:l(l({},t),{},{profile:l(l({},t.profile),{},{endProfile:null,items:l(l({},t.profile.items),{},c({},r.payload,{startRender:n,endRender:null}))})});case d.CAFActionTypes.END_RENDER:var o=t.profile.items?l(l({},t.profile.items[r.payload]),{},{endRender:n}):{},i=l(l({},t.profile.items),{},c({},r.payload,o));return l(l({},t),{},{profile:l(l({},t.profile),{},{endProfile:Object.keys(i).find((function(e){return null===i[e].endRender}))?null:n,items:i})});case d.CAFActionTypes.RESET_RENDER_STATE:return l(l({},t),{},{addFields:{},tags:[],profile:y,requests:A});case d.CAFActionTypes.ADD_REQUEST:return l(l({},t),{},{requests:[].concat(s(t.requests),[r.payload])});case d.CAFActionTypes.SET_PUSH_API:return l(l({},t),{},{push:l(l({},t.push),{},{api:r.payload})});case d.CAFActionTypes.SET_PUSH_TIMER:return l(l({},t),{},{push:l(l({},t.push),{},{pushTimer:r.payload})});case d.CAFActionTypes.SET_PUSH_STORE_REQUEST_TIMER:return l(l({},t),{},{push:l(l({},t.push),{},{pushStoreRequestTimer:r.payload})});case d.CAFActionTypes.SET_PUSH_STORE_PROFILE_TIMER:return l(l({},t),{},{push:l(l({},t.push),{},{pushStoreProfileTimer:r.payload})});case d.CAFActionTypes.SET_LIMIT_REQUESTS:return l(l({},t),{},{push:l(l({},t.push),{},{limitRequests:r.payload})});default:return t}}},834:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CAFActionTypes=void 0,(r=t.CAFActionTypes||(t.CAFActionTypes={})).__INIT__="__INIT__",r.SET_USER="SET_USER",r.SET_LOCATION="SET_LOCATION",r.SET_ADD_FIELDS="SET_ADD_FIELDS",r.ADD_TAG="ADD_TAG",r.REMOVE_TAG="REMOVE_TAG",r.BEGIN_PROFILE="BEGIN_PROFILE",r.END_EMPTY_PROFILE="END_EMPTY_PROFILE",r.BEGIN_RENDER="BEGIN_RENDER",r.END_RENDER="END_RENDER",r.RESET_RENDER_STATE="RESET_RENDER_STATE",r.ADD_REQUEST="ADD_REQUEST",r.SET_PUSH_API="SET_PUSH_API",r.SET_PUSH_TIMER="SET_PUSH_TIMER",r.SET_PUSH_STORE_REQUEST_TIMER="SET_PUSH_STORE_REQUEST_TIMER",r.SET_PUSH_STORE_PROFILE_TIMER="SET_PUSH_STORE_PROFILE_TIMER",r.SET_LIMIT_REQUESTS="SET_LIMIT_REQUESTS"},646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e){var t;return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];clearTimeout(t),t=setTimeout((function(){e.apply(void 0,o)}),r)}}},904:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(646),t),o(r(326),t)},326:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchData=void 0,t.fetchData=function(e,t){fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:t}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(t){console.error("Could not fetch ".concat(e,", error: ").concat(t))}))}},43:(e,t,r)=>{"use strict";!function(){var t,n,o,i=0,s=[];for(n=0;n<256;n++)s[n]=(n+256).toString(16).substr(1);function u(){var e=(16,(!t||i+16>a.BUFFER_SIZE)&&(i=0,t=a.randomBytes(a.BUFFER_SIZE)),t.slice(i,i+=16));return e[6]=15&e[6]|64,e[8]=63&e[8]|128,e}function a(){var e=u();return s[e[0]]+s[e[1]]+s[e[2]]+s[e[3]]+"-"+s[e[4]]+s[e[5]]+"-"+s[e[6]]+s[e[7]]+"-"+s[e[8]]+s[e[9]]+"-"+s[e[10]]+s[e[11]]+s[e[12]]+s[e[13]]+s[e[14]]+s[e[15]]}a.BUFFER_SIZE=4096,a.bin=u,a.clearBuffer=function(){t=null,i=0},a.test=function(e){return"string"==typeof e&&/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},"undefined"!=typeof crypto?o=crypto:"undefined"!=typeof window&&void 0!==window.msCrypto&&(o=window.msCrypto),o=o||r(906),e.exports=a,a.randomBytes=function(){if(o){if(o.randomBytes)return o.randomBytes;if(o.getRandomValues)return"function"!=typeof Uint8Array.prototype.slice?function(e){var t=new Uint8Array(e);return o.getRandomValues(t),Array.from(t)}:function(e){var t=new Uint8Array(e);return o.getRandomValues(t),t}}return function(e){var t,r=[];for(t=0;t<e;t++)r.push(Math.floor(256*Math.random()));return r}}()}()},906:()=>{}},t={},function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(820)).default;var e,t}));